---
layout: post
title:  "marsipan"
list_title: project
date:   2017-04-06 20:46:20 +0100
categories: jekyll update
---
In 2010 I was appointed as consultant in paediatrics, a culmination of years of study, exams and training. A large part of the job was to work attached to a child and adolescent eating disorders service, supporting the therapists and psychiatrists with the medical risks which young people malnourished with eating disorders often have. If the risks are too high, the young people need to be in hospital, but the judgements as to what risk is, who needs to be in hospital, what needs to happen in hospital when they get there - all this is quite subjective. Recent medical history is littered with serious avoidable events - tragic stories where the level of risk a young person had was not recognised by clinicians or there was poor communication between the different services involved. This has lead to 'serious case reviews', and even a wide-ranging review by the parliamentary health services ombudsman (PHSO), the body that adjudicates in NHS failings when the NHS is unable to police itself. It is in this context that MaRSiPAN (Management of at risk, sick patients with anorexia nervosa) came to be, and it was around the time I came into post.

MaRSiPAN in 2022 was relaunched as MEED (Managing Emergencies in Eating Disorders) but over this time (since 2010 when launched) it was become much more widely known and used, and has been instrumental in improving quality of care for people with eating disorders and their families. It is a clinical tool (or set of tools), for helping clinicians who may often be less familiar with eating disorders, to identify risk. Because risk from malnutrition is composite - that is, it is made of different types of risk - the score necessarily needed to be composite. The Risk Assessment Tool is made up of multiple risk domains, each of which have a red, amber or green associated with them. These different risks are not weighted or aggregated into some final score - since none of this can really ethically be validated - rather they are based on agreed best practice from experts working in the field and are meant to be used as a framework around which professionals can have conversations about risk and decide collectively on the best course of action for that person. In effect, the MaRSIPAN tool has standardised the assessment of risk and standardised the conversation that happens between professionals around risk, to individualize the care patients receive.

Like any tool though, particularly given it relies on a list of criteria, it needs to be useable and available to clinicians when they are in a hurry. It made sense therefore to have this in the form of a risk calculator on a phone, so that clinicians may not use it much, but when they need it, it is available, simple to use and intuitive - ie does not need any extra training.

Another aspect of eating disorders that is specific to children is that BMI, an important metric in the assessment of malnutrition, is complicated. Children's body weight and shape changes as they grow, so that the only way to assess it involves the use of growth charts. Any application that measures or interprets BMI in children therefore needs to do so with reference to the growth charts.

![junior marsipan]({{ '../assets/img/marsipan.png'| relative_url }})

Junior MaRSiPAN was built a year or so after the document was launched (2012) and comprised two tools: the risk assessment tool and a BMI calculator for children and young people. I originally built it in android, having made the leap from Google AppInventor to code and started out with Eclipse. Eclipse was the IDE many people used before Android Studio came along and already there were good tools to help build android apps and test them. And this was a fairly simple application with only 2 or 3 screens and it taught me how to get to grips with mobile development, and screen real estate and widgets.

Originally it was just a project for me to help me in my job, but soon I realised I should share this with others, and that an iOS version would be needed. Now with Xcode, after my discoveries with Bone Age, I set about building an iOS version.

Maintaining two code bases though is tedious, particularly in those years as Android had major updates every year, and objective C turned into Swift 1, then 2 then 3. Now that MEED is replacing MaRSiPAN, the mobile apps will need to deprecate and be replaced. I have already made several steps to doing this, now in Flutter and Dart - this is because it is a single code base which is easier to maintain, and would allow me to reach desktop and windows phones too.